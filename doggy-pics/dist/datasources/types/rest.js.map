{"version":3,"sources":["../../../src/datasources/types/rest.ts"],"sourcesContent":["import { GSDataSource, GSContext, GSStatus, PlainObject } from '@godspeedsystems/core';\nimport axios from 'axios';\n\nexport default class RestDataSource extends GSDataSource {\n  async initClient(): Promise<any> {\n    return axios.create({\n      baseURL: this.config.base_url,\n      headers: this.config.headers || {},\n    });\n  }\n\n  async execute(ctx: GSContext, args: PlainObject): Promise<GSStatus> {\n    try {\n      const method = args.meta?.method || 'get';\n      const url = args.meta?.url;\n      const data = args.body || {};\n\n      const response = await this.client.request({\n        method,\n        url,\n        data: method === 'get' ? undefined : data,\n      });\n      \n\n      return new GSStatus(true, 200, 'Request successful', response.data);\n    } catch (err: any) {\n      return new GSStatus(false, err.response?.status || 500, 'Request failed', {\n        error: err.message,\n      });\n    }\n  }\n}\n\nconst SourceType = 'DS';\nconst Type = 'rest';\nconst CONFIG_FILE_NAME = 'rest'; // optional\nconst DEFAULT_CONFIG = {\n  base_url: '',\n  headers: {},\n};\n\nexport {\n  RestDataSource as DataSource,\n  SourceType,\n  Type,\n  CONFIG_FILE_NAME,\n  DEFAULT_CONFIG,\n};\n\n"],"names":["CONFIG_FILE_NAME","DEFAULT_CONFIG","DataSource","RestDataSource","SourceType","Type","GSDataSource","initClient","axios","create","baseURL","config","base_url","headers","execute","ctx","args","method","meta","url","data","body","response","client","request","undefined","GSStatus","err","status","error","message"],"mappings":";;;;;;;;;;;IA6CEA,gBAAgB;eAAhBA;;IACAC,cAAc;eAAdA;;IAJkBC,UAAU;eAA5BC;;IACAC,UAAU;eAAVA;;IACAC,IAAI;eAAJA;;;eAzCmBF;;;sBAH0C;8DAC7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEH,MAAMA,uBAAuBG,kBAAY;IAChDC;;YACJ,OAAOC,cAAK,CAACC,MAAM,CAAC;gBAClBC,SAAS,IAAI,CAACC,MAAM,CAACC,QAAQ;gBAC7BC,SAAS,IAAI,CAACF,MAAM,CAACE,OAAO,IAAI,CAAC;YACnC;QACF;;IAEMC,QAAQC,GAAc,EAAEC,IAAiB;;YAC7C,IAAI;oBACaA,YACHA;gBADZ,MAAMC,SAASD,EAAAA,aAAAA,KAAKE,IAAI,cAATF,iCAAAA,WAAWC,MAAM,KAAI;gBACpC,MAAME,OAAMH,cAAAA,KAAKE,IAAI,cAATF,kCAAAA,YAAWG,GAAG;gBAC1B,MAAMC,OAAOJ,KAAKK,IAAI,IAAI,CAAC;gBAE3B,MAAMC,WAAW,MAAM,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC;oBACzCP;oBACAE;oBACAC,MAAMH,WAAW,QAAQQ,YAAYL;gBACvC;gBAGA,OAAO,IAAIM,cAAQ,CAAC,MAAM,KAAK,sBAAsBJ,SAASF,IAAI;YACpE,EAAE,OAAOO,KAAU;oBACUA;gBAA3B,OAAO,IAAID,cAAQ,CAAC,OAAOC,EAAAA,gBAAAA,IAAIL,QAAQ,cAAZK,oCAAAA,cAAcC,MAAM,KAAI,KAAK,kBAAkB;oBACxEC,OAAOF,IAAIG,OAAO;gBACpB;YACF;QACF;;AACF;AAEA,MAAM1B,aAAa;AACnB,MAAMC,OAAO;AACb,MAAML,mBAAmB,QAAQ,WAAW;AAC5C,MAAMC,iBAAiB;IACrBW,UAAU;IACVC,SAAS,CAAC;AACZ"}